{
  "name": "Call-feature-service-Leaflet",
  "tagline": "Here I explain how to call Seattle Open Data Esri Feature Services using Leaflet.",
  "body": "# Seattle-Feature-Service\r\nHere I show how to call Seattle Open Data Esri Feature Services using Leaflet. \r\nThis example is based on this <a href= \"http://esri.github.io/esri-leaflet/tutorials/working-with-feature-layers.html\">Esri Custom popup tutorial.</a> \r\n\r\nSeattle offers many stylized feature services that you may incorporate use. I use <a href= \"https://esri.github.io/esri-leaflet/examples/feature-layer-popups.html\">Tree data found here </a>, but you can browse other <a href= \"https://gisrevprxy.seattle.gov/arcgis/rest/services/ext/WM_CityGISLayers/MapServerl\">Seattle data here</a>. Before you commit to a dataset you can browse what is contains when you click ArcGIS Online MapViewer on the data page. \r\n\r\n##Let's get started\r\nI first provide you basic with can see we have the basic HTML requirements, the title of the page is Calling Features with Leaflet, the map is stylized to fill the whole screen, the center of the map is set to Seattle and zoom level is appropriately framing Seattle.\r\n\r\nStart with the following: \r\n\r\n```\r\n<!doctype html>\r\n<html lang=\"en\">\r\n<head>  \r\n  <meta charset=\"utf-8\">\r\n  <title>Calling Features with Leaflet</title>  \r\n  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />\r\n\r\n  <!-- Load Leaflet from CDN-->\r\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@0.7.7/dist/leaflet.css\" />\r\n  <script src=\"https://unpkg.com/leaflet@0.7.7/dist/leaflet.js\"></script>\r\n\r\n  <!-- Load Esri Leaflet from CDN -->\r\n  <script src=\"https://cdn.jsdelivr.net/leaflet.esri/1.0.4/esri-leaflet.js\"></script>\r\n\r\n  <style>\r\n    html,\r\n    body,\r\n    #map {\r\n      height: 100%;\r\n      width: 100%;\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n  </style>\r\n</head>\r\n<body>    \r\n    <div id=\"map\"></div>\r\n\r\n    <script>\r\n         var map = L.map('map').setView([47.6062, -122.3321], 12)\r\n        });\r\n\r\n        var esriStreets = L.esri.basemapLayer('Topographic').addTo(map);\r\n\r\n            \r\n    </script>    \r\n</body>\r\n</html>\r\n```\r\n\r\nThis will provide us with a Topographic basemap that fills the browser frame.\r\n\r\nNow let's add some data to feature! You have looked around what Seattle has to offer. As I meantioned, I am using the heratige tree data, so under the map variable and before I close the script tag I will name the variable seattleHeriageTrees to call the feature layer and add to the map. I add tags to remind me what the code does. \r\n\r\n```\r\n //set the tree variable call the server to then display or add to the map\r\n        var seattleHeritageTrees = L.esri.featureLayer({url: 'https://gisrevprxy.seattle.gov/arcgis/rest/services/ext/WM_CityGISLayers/MapServer/33'}).addTo(map);\r\n        \r\n ```\r\n\r\nIf we open the code now, you will see the default pin markers and nothing else. we want them to tell use something! We can see from the Esri page that the symbology has been set. We need to tell the browser to get that style. To do so we add the following to the head. \r\n\r\n ```\r\n<!-- Load Esri Leaflet Renderers from CDN -->\r\n<script src=\"https://cdn.jsdelivr.net/leaflet.esri.renderers/1.0.1/esri-leaflet-renderers.js\"></script>\r\n ```\r\n Now the blue dots should be replaced with trees! \r\n \r\nNext we need to add the popup window to say something meaningful. We do not want a laundry list of all the attributes that Esri Online provides. We only want to share what the end users need to see. I can see all the attributes available, from these I decide I only want to share. I decided to simply share the common and scientific names of the tree selected.\r\n\r\nI added the following just under the add to map. Again, I added comments to remember what I am showing.\r\n ```\r\n //customize the popup, do you no present a laundry list of attributes, think about what the end user needs to know.\r\n        seattleHeritageTrees.bindPopup(function(feature) {\r\n    return L.Util.template('<h3>{DESCRIPT }</h3><hr /><p> Its scientific name is {SCINAME}.', feature.properties);\r\n ```\r\nHooray! Now when I click a tree, meaningful information pops up. This is fun so I want to add more information. \r\n\r\n#Add another layer \r\n\r\nI want to see if these trees are close to herritage landmarks. I can see that there is a Landamarks layer. I will make a new variable called Seattle landmarks and add it to the map. I add this next bit just under the add to map. \r\n\r\n ```\r\n //set the Seattle Landmarks variable call the server to then display or add to the map\r\n        var seattleLandmarks = L.esri.featureLayer({url: 'https://gisrevprxy.seattle.gov/arcgis/rest/services/ext/WM_CityGISLayers/MapServer/55'}).addTo(map);\r\n ```\r\n \r\n I need popup information for this new layer too. I see what attributes are available and decide to share informaiton about the address and how long this site has been recognized. I add the following under the feature properties\r\n \r\n  ```\r\n  //popup information for landmarks\r\n \r\n  seattleLandmarks.bindPopup(function(feature) {\r\n            return L.Util.template('<h3>{NAME}</h3><hr /><p>This landmark is located at {ADDRESS} and has been recognized since {EFF_DATE}.', feature.properties);\r\n                \r\n         });       \r\n          \r\n  ```\r\n\r\nThe dates look bizarre so I decide remove that from the label, it is meaningless! \r\nNow we should see trees and landmarks. Fun! Let's keep going!\r\n          \r\n#Add basemap selector\r\n\r\nI want to user to be able to change the basemaps if they would like. \r\n\r\nAdd the following into the style tag. Make sure you place it properly, after the } the close of the #map\r\n\r\n```\r\n#basemaps-wrapper {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 10px;\r\n    z-index: 400;\r\n    background: white;\r\n    padding: 10px;\r\n  }\r\n  #basemaps {\r\n    margin-bottom: 5px;\r\n  }\r\n ```\r\n \r\n Then we need to add the div to place the dropdown within the frame. \r\n \r\n  ```\r\n <div id=\"basemaps-wrapper\" class=\"leaflet-bar\">\r\n  <select name=\"basemaps\" id=\"basemaps\" onChange=\"changeBasemap(basemaps)\">\r\n    <option value=\"Topographic\">Topographic</option>\r\n    <option value=\"Streets\">Streets</option>\r\n    <option value=\"NationalGeographic\">National Geographic</option>\r\n    <option value=\"Oceans\">Oceans</option>\r\n    <option value=\"Gray\">Gray</option>\r\n    <option value=\"DarkGray\">Dark Gray</option>\r\n    <option value=\"Imagery\">Imagery</option>\r\n    <option value=\"ShadedRelief\">Shaded Relief</option>\r\n  </select>\r\n</div>\r\n ```\r\nLooks great! \r\n\r\n##That is all for now\r\nHere you have learned to call data straight from an Esri server. Awesome! There are so many different ways to call feature layers. <a href=\"http://esri.github.io/esri-leaflet/tutorials/introduction-to-layer-types.html\">See more examples here.</a> Enjoy!\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}